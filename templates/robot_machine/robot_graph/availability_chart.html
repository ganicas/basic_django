<style>
body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
path.slice{
	stroke-width:2px;
}
polyline{
	opacity: .3;
	stroke: black;
	stroke-width: 2px;
	fill: none;
}
svg text.availability_percent{
	fill:white;
	text-anchor:middle;
	font-size:20px;
}

</style>
<div id="availability">
    <!--<button onClick="changeData()">Change Data</button>-->
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script  src="{{ '/static/js/charts/availability_chart.js' }}"></script>
    <script>
        /*
        d3.json("http://localhost:8000/availability_chart/"+robot_id+"/?format=json",  function(error, data){
            if (error) throw error;
            console.log('eeeee', data)
            var svg = d3.select("#availability").append("svg").attr("width",500).attr("height",300);
            svg.append("g").attr("id","quotesDonut");

            if(data == 0){
                var basic = 99
            }else if (data != 0){
                var basic = 100 - data;

            }
            availability.draw("quotesDonut", [{label: "Basic", color:"#3366CC", value: basic}, {label: "Plus",  color: "#109618", value: data}], 150, 100, 130, 100, 30, 0);
            document.getElementById('availability_dashboard').innerHTML = 'Availability ' +data +'%';
        });
        */
        var svg = d3.select("#availability").append("svg").attr("width","100%").attr("height","130%");
        svg.append("g").attr("id","machine_availability");
        var data={{dashboard_data.availability}}
        function availability_reload(data){
            if(data == 0){
                var basic = 99
            }else if (data != 0){
                var basic = 100 - data;
            }else if(data == 99){
                var basic = 0;
            }
            availability.draw("machine_availability", [{label: "Basic", color:"#3366CC", value: basic}, {label: "Plus",  color: "#109618", value: data}], 180, 105, 130, 100, 30, 0);
            document.getElementById('availability_dashboard').innerHTML = 'Availability ' +data +'%';

        }
        availability_reload(data);
    </script>
</div>



